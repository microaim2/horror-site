<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DO YOU TRUST ME?</title>
<style>
  body{
    margin:0;
  background:#050505;
  color:#eee;
  font-family: Arial, sans-serif;
  display:flex;
  justify-content:center;
  align-items:flex-start; /* ВАЖНО */
  min-height:100vh;       /* ВАЖНО */
  overflow-y:auto;        /* ВАЖНО */
}
  .box{
    max-height:90vh;
    overflow-y:auto;
    width:520px;
    padding:20px;
    background:#0d0d0d;
    border:1px solid #ff2a2a;
    box-shadow:0 0 55px rgba(255,0,0,.35);
    position:relative;
  }
  h1{
    text-align:center;
    color:#ff2a2a;
    letter-spacing:3px;
    margin: 8px 0 14px;
    text-shadow: 0 0 16px rgba(255,42,42,.25);
    user-select:none;
  }
  input, button{
    width:100%;
    padding:10px;
    margin-top:10px;
    background:#000;
    color:#fff;
    border:1px solid #444;
    outline:none;
  }
  input:focus{ border-color:#ff2a2a; }
  button{
    cursor:pointer;
    border-color:#ff2a2a;
    letter-spacing:1px;
  }
  .hidden{ display:none; }
  .question{
    margin-top:15px;
    font-size:18px;
    line-height:1.35;
    min-height:52px;
  }
  .hint{
    margin-top:10px;
    font-size:12px;
    color:#aaa;
    text-align:center;
    user-select:none;
  }

  /* ===== МИГАНИЕ НА КАЖДОМ ВОПРОСЕ ===== */
  .flickerQ{
    animation: qflicker .85s steps(2,end) infinite;
    text-shadow: 0 0 14px rgba(255,42,42,.35);
  }
  @keyframes qflicker{
    0%{ opacity:1; transform:translate(0,0); filter:blur(0); }
    35%{ opacity:.22; transform:translate(1px,-1px); filter:blur(.5px); }
    55%{ opacity:1; transform:translate(-1px,1px); filter:blur(0); }
    70%{ opacity:.42; transform:translate(1px,1px); filter:blur(.8px); }
    100%{ opacity:1; transform:translate(0,0); filter:blur(0); }
  }

  /* ===== RED FLASH ===== */
  #flash{
    position:fixed;
    inset:0;
    background:rgba(255,0,0,.92);
    opacity:0;
    pointer-events:none;
    z-index:9998;
  }
  #flash.on{
    animation: flash 0.10s steps(2) infinite;
  }
  @keyframes flash{
    0%{opacity:0}
    50%{opacity:1}
    100%{opacity:0}
  }

  /* ===== SCREAMER (страшнее) ===== */
  #screamer{
    position:fixed;
    inset:0;
    background:#000;
    display:none;
    justify-content:center;
    align-items:center;
    z-index:9999;
    overflow:hidden;
  }
  #screamer.show{
    display:flex;
    animation: shake .16s infinite;
  }
  @keyframes shake{
    0%{transform:translate(0)}
    25%{transform:translate(16px,-14px)}
    50%{transform:translate(-16px,14px)}
    75%{transform:translate(14px,16px)}
    100%{transform:translate(0)}
  }
  #screamer::before{
    content:"";
    position:absolute;
    inset:-20%;
    background:
      radial-gradient(700px 460px at 30% 35%, rgba(255,42,42,.20), transparent 60%),
      radial-gradient(900px 650px at 70% 55%, rgba(255,255,255,.07), transparent 60%),
      repeating-linear-gradient(
        0deg,
        rgba(255,255,255,.07) 0px,
        rgba(255,255,255,.07) 2px,
        transparent 2px,
        transparent 7px
      );
    opacity:.95;
    animation: scan 0.45s linear infinite;
    mix-blend-mode: screen;
  }
  @keyframes scan{
    from{ transform: translateY(-12%); }
    to{ transform: translateY(12%); }
  }

  .face{
    width:min(600px, 94vw);
    aspect-ratio: 1 / 1;
    border-radius: 26px;
    border: 2px solid rgba(255,42,42,.75);
    box-shadow: 0 0 120px rgba(255,42,42,.55);
    position:relative;
    overflow:hidden;
    background:
      radial-gradient(900px 700px at 50% 50%, #171717, #000 70%);
  }
  .eye{
    position:absolute;
    width: 28%;
    height: 18%;
    top: 24%;
    border-radius: 999px;
    background:
      radial-gradient(circle at 50% 55%, rgba(255,255,255,.98) 0 18%, rgba(255,255,255,0) 60%),
      radial-gradient(circle at 50% 55%, rgba(255,42,42,.95) 0 12%, rgba(255,42,42,0) 60%);
    filter: drop-shadow(0 0 22px rgba(255,42,42,.65));
    animation: eyeJitter .10s infinite;
    opacity:.98;
  }
  .eye.left{ left: 16%; }
  .eye.right{ right: 16%; }
  @keyframes eyeJitter{
    0%{ transform: translate(0,0) scale(1); }
    50%{ transform: translate(3px,-2px) scale(1.03); }
    100%{ transform: translate(0,0) scale(1); }
  }
  .mouth{
    position:absolute;
    left: 20%;
    right: 20%;
    bottom: 16%;
    height: 32%;
    border-radius: 22px 22px 46px 46px;
    background:
      radial-gradient(140px 90px at 50% 25%, rgba(255,255,255,.14), rgba(0,0,0,0) 70%),
      radial-gradient(700px 280px at 50% 70%, rgba(255,42,42,.62), rgba(0,0,0,.0) 70%),
      radial-gradient(900px 700px at 50% 60%, #0a0a0a, #000 70%);
    border: 1px solid rgba(255,42,42,.38);
    box-shadow: inset 0 -20px 55px rgba(0,0,0,.92);
    animation: mouthPulse .14s infinite;
  }
  @keyframes mouthPulse{
    0%{ transform: translateY(0) scaleY(1); }
    50%{ transform: translateY(3px) scaleY(1.06); }
    100%{ transform: translateY(0) scaleY(1); }
  }
  .sTxt{
    position:absolute;
    bottom: 22px;
    left: 0; right: 0;
    text-align:center;
    font-weight: 900;
    letter-spacing:.22em;
    color: rgba(255,42,42,.95);
    text-shadow: 0 0 22px rgba(255,42,42,.55);
    font-size: clamp(14px, 3vw, 28px);
    animation: glitchText .18s infinite;
    user-select:none;
  }
  @keyframes glitchText{
    0%{ transform: translate(0,0); opacity: 1; }
    25%{ transform: translate(3px,-2px); opacity: .82; }
    50%{ transform: translate(-3px,2px); opacity: 1; }
    75%{ transform: translate(2px,3px); opacity: .9; }
    100%{ transform: translate(0,0); opacity: 1; }
  }

  /* ===== END (красиво без тегов) ===== */
  .final{
    color:#e8d6d6;
    font-size:14px;
    line-height:1.7;
    margin-top:8px;
  }
  .panel{
    border: 1px solid rgba(255,255,255,.08);
    background: rgba(0,0,0,.35);
    border-radius: 14px;
    padding: 14px;
    margin-top: 10px;
  }
  .titleSmall{
    color: rgba(255,255,255,.75);
    letter-spacing:.18em;
    text-transform: uppercase;
    font-size: 12px;
    margin: 0 0 8px;
  }
  .kv{
    display:grid;
    grid-template-columns: 1fr 2fr;
    gap: 6px 10px;
    font-size: 14px;
  }
  .kv b{ color:#fff; font-weight:700; }
  .answers{
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  .qa{
    border-left: 3px solid rgba(255,42,42,.55);
    padding-left: 10px;
  }
  .q{
    color: rgba(255,255,255,.82);
    margin:0 0 4px;
  }
  .a{
    color:#ffb6b6;
    margin:0;
    font-weight:700;
  }
  .fadeIn{
    opacity:0;
    transform: translateY(6px);
    animation: fade 0.9s ease forwards;
  }
  @keyframes fade{
    to{ opacity:1; transform: translateY(0); }
  }
  .watch{
    color:#ff2a2a;
    font-weight:900;
    letter-spacing:.12em;
    text-shadow: 0 0 18px rgba(255,42,42,.45);
    animation: blinkRed 0.9s steps(2,end) infinite;
    text-align:center;
    margin: 10px 0 0;
  }
  @keyframes blinkRed{
    0%{ opacity:1; }
    50%{ opacity:.18; }
    100%{ opacity:1; }
  }
</style>
</head>

<body>
<div class="box">
  <!-- REG -->
  <div id="reg">
    <h1>WELCOME</h1>
    <input id="name" placeholder="Your name">
    <input id="age" placeholder="Your age">
    <input id="city" placeholder="Your city">
    <button id="enterBtn">ENTER</button>
    <div class="hint">я знаю, кто ты</div>
  </div>

  <!-- TEST -->
  <div id="test" class="hidden">
    <h1>ANSWER</h1>
    <div class="question" id="question"></div>
    <input id="answer" placeholder="type your answer">
    <button id="nextBtn">NEXT</button>
    <div class="hint">я тебя вижу</div>
  </div>

  <!-- END -->
  <div id="end" class="hidden">
    <h1>FINAL</h1>
    <div class="final" id="result"></div>
    <button id="resetBtn">RESET</button>
    <div class="hint"> Сайт отслеживает тебя на самом деле.</div>
  </div>
</div>

<div id="flash"></div>

<!-- SCREAMER -->
<div id="screamer" aria-hidden="true">
  <div class="face">
    <div class="eye left"></div>
    <div class="eye right"></div>
    <div class="mouth"></div>
    <div class="sTxt">DON'T LOOK BACK</div>
  </div>
</div>

<script>
/* =========================
   QUESTIONS
========================= */
const questionsPool = [
  "Are you alone right now?",
  "Did you lock the door?",
  "Is the light on in your room?",
  "Do you hear any small sounds?",
  "When was the last time you checked behind you?",
  "What is your biggest fear?",
  "Do you believe in ghosts?",
  "Have you ever felt watched?",
  "What would you do if someone whispered your name?",
  "Do you trust this website?",
  "Why did you continue?",
  "What time is it where you are?",
  "What was the last thing you ate?",
  "What is the nearest object to your hand?",
  "Do you sleep with the door closed?",
  "Have you ever seen a shadow move?",
  "If you heard steps in the corridor, would you look?",
  "Who knows you are here right now?",
  "What app did you open last?",
  "What is your worst memory?",
  "What would you never want to lose?",
  "What is something you hide from people?",
  "Do you think someone is reading this with you?",
  "Describe the last nightmare you remember.",
  "Do you want to stop now?"
];

const TOTAL_QUESTIONS = 14;

function pickRandomQuestions(all, count){
  const copy = [...all];
  for(let i = copy.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [copy[i], copy[j]] = [copy[j], copy[i]];
  }
  return copy.slice(0, count);
}

/* =========================
   DOM
========================= */
const regEl = document.getElementById("reg");
const testEl = document.getElementById("test");
const endEl  = document.getElementById("end");

const nameInput = document.getElementById("name");
const ageInput  = document.getElementById("age");
const cityInput = document.getElementById("city");

const questionEl = document.getElementById("question");
const answerInput = document.getElementById("answer");
const resultEl = document.getElementById("result");

const enterBtn = document.getElementById("enterBtn");
const nextBtn = document.getElementById("nextBtn");
const resetBtn = document.getElementById("resetBtn");

const screamer = document.getElementById("screamer");
const flash = document.getElementById("flash");

/* =========================
   STATE
========================= */
let user = {};
let answers = [];
let qIndex = 0;
let sessionQuestions = pickRandomQuestions(questionsPool, TOTAL_QUESTIONS);

// скример: 1 раз, без предупреждения, случайно во время вопросов
let screamScheduled = false;
let screamTriggered = false;
let screamTimer = null;

// финальный скример (в конце)
let finalScreamTimer = null;

let lastScreamAt = 0;

/* =========================
   AUDIO (WebAudio) — MUSIC + "GIRL" SCREAM
========================= */
let ctx = null;
let musicOn = false;
let musicNodes = null;

function ensureAudio(){
  if(!ctx){
    ctx = new (window.AudioContext || window.webkitAudioContext)();
  }
  if(ctx.state === "suspended"){
    ctx.resume().catch(()=>{});
  }
}

// мрачная “натягивающая нервы” музыка (генерация, без файлов)
function startTenseMusic(){
  ensureAudio();
  if(musicOn) return;

  const master = ctx.createGain();
  master.gain.value = 0.33;

  const comp = ctx.createDynamicsCompressor();
  comp.threshold.value = -26;
  comp.knee.value = 22;
  comp.ratio.value = 7;
  comp.attack.value = 0.006;
  comp.release.value = 0.12;

  const filter = ctx.createBiquadFilter();
  filter.type = "lowpass";
  filter.frequency.value = 900;
  filter.Q.value = 0.75;

  const lfo = ctx.createOscillator();
  lfo.type = "sine";
  lfo.frequency.value = 0.22;
  const lfoGain = ctx.createGain();
  lfoGain.gain.value = 520;
  lfo.connect(lfoGain);
  lfoGain.connect(filter.frequency);

  const o1 = ctx.createOscillator();
  o1.type = "sawtooth";
  o1.frequency.value = 52;

  const o2 = ctx.createOscillator();
  o2.type = "triangle";
  o2.frequency.value = 68;

  const mix = ctx.createGain();
  mix.gain.value = 0.60;

  o1.connect(mix);
  o2.connect(mix);

  mix.connect(filter);
  filter.connect(comp);
  comp.connect(master);
  master.connect(ctx.destination);

  o1.start();
  o2.start();
  lfo.start();

  const pumpTimer = setInterval(() => {
    if(!musicOn) return;
    const t = Date.now()/1000;
    master.gain.value = 0.28 + 0.12*(0.5 + 0.5*Math.sin(t*2.1));
    filter.frequency.value = 650 + 450*(0.5 + 0.5*Math.sin(t*0.22));
    o2.frequency.value = 64 + 10*(0.5 + 0.5*Math.sin(t*0.14));
    o1.frequency.value = 50 + 6*(0.5 + 0.5*Math.sin(t*0.11));
  }, 50);

  musicNodes = { master, comp, filter, lfo, lfoGain, o1, o2, mix, pumpTimer };
  musicOn = true;
}

// “девичий” крик: визг + шум + искажение (очень резко)
function girlScreamVeryScary(){
  ensureAudio();
  const now = ctx.currentTime;

  if(Date.now() - lastScreamAt < 800) return;
  lastScreamAt = Date.now();

  const master = ctx.createGain();
  master.gain.value = 2.9; // резко (ощущается громко)

  const comp = ctx.createDynamicsCompressor();
  comp.threshold.value = -32;
  comp.knee.value = 24;
  comp.ratio.value = 12;
  comp.attack.value = 0.001;
  comp.release.value = 0.08;

  const shaper = ctx.createWaveShaper();
  shaper.curve = makeDistortionCurve(900);
  shaper.oversample = "4x";

  const bp = ctx.createBiquadFilter();
  bp.type = "bandpass";
  bp.frequency.value = 1150;
  bp.Q.value = 1.3;

  const hp = ctx.createBiquadFilter();
  hp.type = "highpass";
  hp.frequency.value = 420;

  const o = ctx.createOscillator();
  o.type = "sawtooth";
  o.frequency.value = 980;

  const o2 = ctx.createOscillator();
  o2.type = "triangle";
  o2.frequency.value = 740;

  const size = Math.floor(ctx.sampleRate * 0.42);
  const buffer = ctx.createBuffer(1, size, ctx.sampleRate);
  const data = buffer.getChannelData(0);
  for(let i=0;i<size;i++){
    data[i] = (Math.random()*2 - 1) * 0.95;
  }
  const noise = ctx.createBufferSource();
  noise.buffer = buffer;

  const g = ctx.createGain();
  g.gain.value = 0.0001;

  o.connect(bp);
  o2.connect(bp);
  noise.connect(bp);

  bp.connect(hp);
  hp.connect(shaper);
  shaper.connect(g);
  g.connect(comp);
  comp.connect(master);
  master.connect(ctx.destination);

  g.gain.setValueAtTime(0.0001, now);
  g.gain.exponentialRampToValueAtTime(1.0, now + 0.02);
  g.gain.exponentialRampToValueAtTime(0.0001, now + 0.38);

  o.frequency.setValueAtTime(820, now);
  o.frequency.exponentialRampToValueAtTime(1650, now + 0.08);
  o.frequency.exponentialRampToValueAtTime(920, now + 0.38);

  o2.frequency.setValueAtTime(620, now);
  o2.frequency.exponentialRampToValueAtTime(980, now + 0.07);
  o2.frequency.exponentialRampToValueAtTime(680, now + 0.38);

  bp.frequency.setValueAtTime(900, now);
  bp.frequency.exponentialRampToValueAtTime(1550, now + 0.10);
  bp.frequency.exponentialRampToValueAtTime(1120, now + 0.38);

  o.start(now);
  o2.start(now);
  noise.start(now);

  o.stop(now + 0.45);
  o2.stop(now + 0.45);
  noise.stop(now + 0.45);

  setTimeout(() => {
    try{ o.disconnect(); }catch(e){}
    try{ o2.disconnect(); }catch(e){}
    try{ noise.disconnect(); }catch(e){}
    try{ bp.disconnect(); }catch(e){}
    try{ hp.disconnect(); }catch(e){}
    try{ shaper.disconnect(); }catch(e){}
    try{ g.disconnect(); }catch(e){}
    try{ comp.disconnect(); }catch(e){}
    try{ master.disconnect(); }catch(e){}
  }, 900);
}

function makeDistortionCurve(amount){
  const n = 44100;
  const curve = new Float32Array(n);
  const deg = Math.PI / 180;
  for (let i = 0; i < n; ++i) {
    const x = (i * 2) / n - 1;
    curve[i] = ((3 + amount) * x * 20 * deg) / (Math.PI + amount * Math.abs(x));
  }
  return curve;
}

/* =========================
   FLOW
========================= */
function setQuestion(){
  questionEl.textContent = sessionQuestions[qIndex];
  answerInput.value = "";
  answerInput.focus();

  // МИГАНИЕ НА КАЖДОМ ВОПРОСЕ
  questionEl.classList.remove("flickerQ");
  void questionEl.offsetWidth;
  questionEl.classList.add("flickerQ");
  setTimeout(() => questionEl.classList.remove("flickerQ"), 1500);
}

function scheduleRandomScreamer(){
  if(screamScheduled) return;
  screamScheduled = true;

  // 1 раз в случайный момент (6..20 секунд) во время вопросов
  const delay = Math.floor(Math.random() * 14000) + 6000;
  screamTimer = setTimeout(() => {
    if(screamTriggered) return;
    if(!testEl.classList.contains("hidden")) triggerScreamer();
  }, delay);
}

function afterScreamerMessage(questionIndexSnapshot){
  // после скримера: на 1 секунду "I SEE YOU"
  if(testEl.classList.contains("hidden")) return; // не на экране вопросов
  if(qIndex !== questionIndexSnapshot) return;     // пользователь уже ушёл дальше

  const original = sessionQuestions[qIndex];
  questionEl.textContent = "I SEE YOU";
  questionEl.classList.remove("flickerQ");
  void questionEl.offsetWidth;
  questionEl.classList.add("flickerQ");

  setTimeout(() => {
    // вернуть вопрос
    if(testEl.classList.contains("hidden")) return;
    if(qIndex !== questionIndexSnapshot) return;
    questionEl.textContent = original;
  }, 1000);
}

function triggerScreamer(){
  screamTriggered = true;

  const snapshot = qIndex;

  flash.classList.add("on");
  screamer.classList.add("show");
  screamer.setAttribute("aria-hidden", "false");

  // страшный крик
  girlScreamVeryScary();

  // музыка НЕ останавливается (как ты просила)
  setTimeout(() => flash.classList.remove("on"), 1200);

  // "I SEE YOU" после скримера на 1 секунду
  setTimeout(() => afterScreamerMessage(snapshot), 900);
}

function startTest(){
  user.name = nameInput.value.trim();
  user.age  = ageInput.value.trim();
  user.city = cityInput.value.trim();

  if(!user.name || !user.age || !user.city){
    alert("Fill everything.");
    return;
  }

  sessionQuestions = pickRandomQuestions(questionsPool, TOTAL_QUESTIONS);
  answers = [];
  qIndex = 0;
  screamScheduled = false;
  screamTriggered = false;

  regEl.classList.add("hidden");
  testEl.classList.remove("hidden");

  // музыка начинается после клика (браузер разрешает)
  startTenseMusic();
  scheduleRandomScreamer();

  setQuestion();
}

function nextQuestion(){
  const a = answerInput.value.trim();
  if(!a){
    alert("Answer.");
    return;
  }

  answers.push({ q: sessionQuestions[qIndex], a });
  qIndex++;

  if(qIndex < sessionQuestions.length){
    setQuestion();
  } else {
    finish();
  }
}

function finish(){
  testEl.classList.add("hidden");
  endEl.classList.remove("hidden");

  // красивая история без "лишних знаков"
  const time = new Date().toLocaleTimeString();
  const safeName = escapeHtml(user.name);
  const safeAge  = escapeHtml(user.age);
  const safeCity = escapeHtml(user.city);

  // собираем ответы как аккуратные блоки
  const qaHtml = answers.map((x, idx) => `
    <div class="qa fadeIn" style="animation-delay:${(idx*0.06 + 0.9).toFixed(2)}s">
      <p class="q"><b>${idx+1}.</b> ${escapeHtml(x.q)}</p>
      <p class="a">— ${escapeHtml(x.a)}</p>
    </div>
  `).join("");

  resultEl.innerHTML = `
    <div class="panel fadeIn" style="animation-delay:.10s">
      <div class="titleSmall">FINAL RECORD — ${escapeHtml(time)}</div>
      <div>
        Ты думал(а), что это просто сайт.<br>
        Но сайт — это дверь.<br>
        А ты сам(а) нажал(а) на ручку.
      </div>
    </div>

    <div class="panel fadeIn" style="animation-delay:.35s">
      <div class="titleSmall">Сначала ты оставил(а) простое</div>
      <div class="kv">
        <div>Имя:</div><div><b>${safeName}</b></div>
        <div>Возраст:</div><div><b>${safeAge}</b></div>
        <div>Город:</div><div><b>${safeCity}</b></div>
      </div>
    </div>

    <div class="panel fadeIn" style="animation-delay:.60s">
      <div class="titleSmall">Потом ты начал(а) отвечать</div>
      <div>
        И каждый ответ — как шаг по коридору, где не горит свет.<br>
        Ты слышишь только своё дыхание… и <b>чьё-то ещё</b>.
      </div>
    </div>

    <div class="panel">
      <div class="titleSmall fadeIn" style="animation-delay:.85s">ТВОИ ОТВЕТЫ</div>
      <div class="answers">${qaHtml}</div>
    </div>

    <div class="panel fadeIn" style="animation-delay:${(answers.length*0.06 + 1.25).toFixed(2)}s">
      <div class="titleSmall">И вот что страшно</div>
      <div>
        Ты думаешь, что ответы исчезают.<br>
        Но они <b>остаются</b>.<br><br>
        Если в комнате что-то щёлкнет — не проверяй.<br>
        Если экран моргнёт — не смотри в отражение.
      </div>
      <div class="watch">WE ARE WATCHING YOU</div>
    </div>
  `;

  // финальный скример (ещё один) — через 7–10 сек после появления финала
  const finalDelay = Math.floor(Math.random() * 3000) + 7000;
  clearTimeout(finalScreamTimer);
  finalScreamTimer = setTimeout(() => {
    // показываем финальный скример даже на финале
    flash.classList.add("on");
    screamer.classList.add("show");
    screamer.setAttribute("aria-hidden", "false");
    girlScreamVeryScary();
    setTimeout(() => flash.classList.remove("on"), 1200);
  }, finalDelay);
}

function hideScreamerOnly(){
  // прячем скример, но музыка продолжает
  flash.classList.remove("on");
  screamer.classList.remove("show");
  screamer.setAttribute("aria-hidden", "true");
}

function fakeReset(){
  alert("TOO LATE");
}

function escapeHtml(str){
  return String(str)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

/* =========================
   EVENTS
========================= */
enterBtn.addEventListener("click", startTest);
nextBtn.addEventListener("click", nextQuestion);
resetBtn.addEventListener("click", fakeReset);

document.addEventListener("keydown", (e) => {
  if(e.key === "Enter"){
    if(!regEl.classList.contains("hidden")) startTest();
    else if(!testEl.classList.contains("hidden")) nextQuestion();
  }
  if(e.key === "Escape"){
    hideScreamerOnly(); // музыка НЕ выключается
  }
});

screamer.addEventListener("click", hideScreamerOnly);
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>DO YOU TRUST ME?</title>
<style>
  body{
    margin:0;
  background:#050505;
  color:#eee;
  font-family: Arial, sans-serif;
  display:flex;
  justify-content:center;
  align-items:flex-start; /* ВАЖНО */
  min-height:100vh;       /* ВАЖНО */
  overflow-y:auto;        /* ВАЖНО */
}
  .box{
    max-height:90vh;
    overflow-y:auto;
    width:520px;
    padding:20px;
    background:#0d0d0d;
    border:1px solid #ff2a2a;
    box-shadow:0 0 55px rgba(255,0,0,.35);
    position:relative;
  }
  h1{
    text-align:center;
    color:#ff2a2a;
    letter-spacing:3px;
    margin: 8px 0 14px;
    text-shadow: 0 0 16px rgba(255,42,42,.25);
    user-select:none;
  }
  input, button{
    width:100%;
    padding:10px;
    margin-top:10px;
    background:#000;
    color:#fff;
    border:1px solid #444;
    outline:none;
  }
  input:focus{ border-color:#ff2a2a; }
  button{
    cursor:pointer;
    border-color:#ff2a2a;
    letter-spacing:1px;
  }
  .hidden{ display:none; }
  .question{
    margin-top:15px;
    font-size:18px;
    line-height:1.35;
    min-height:52px;
  }
  .hint{
    margin-top:10px;
    font-size:12px;
    color:#aaa;
    text-align:center;
    user-select:none;
  }

  /* ===== МИГАНИЕ НА КАЖДОМ ВОПРОСЕ ===== */
  .flickerQ{
    animation: qflicker .85s steps(2,end) infinite;
    text-shadow: 0 0 14px rgba(255,42,42,.35);
  }
  @keyframes qflicker{
    0%{ opacity:1; transform:translate(0,0); filter:blur(0); }
    35%{ opacity:.22; transform:translate(1px,-1px); filter:blur(.5px); }
    55%{ opacity:1; transform:translate(-1px,1px); filter:blur(0); }
    70%{ opacity:.42; transform:translate(1px,1px); filter:blur(.8px); }
    100%{ opacity:1; transform:translate(0,0); filter:blur(0); }
  }

  /* ===== RED FLASH ===== */
  #flash{
    position:fixed;
    inset:0;
    background:rgba(255,0,0,.92);
    opacity:0;
    pointer-events:none;
    z-index:9998;
  }
  #flash.on{
    animation: flash 0.10s steps(2) infinite;
  }
  @keyframes flash{
    0%{opacity:0}
    50%{opacity:1}
    100%{opacity:0}
  }

  /* ===== SCREAMER (страшнее) ===== */
  #screamer{
    position:fixed;
    inset:0;
    background:#000;
    display:none;
    justify-content:center;
    align-items:center;
    z-index:9999;
    overflow:hidden;
  }
  #screamer.show{
    display:flex;
    animation: shake .16s infinite;
  }
  @keyframes shake{
    0%{transform:translate(0)}
    25%{transform:translate(16px,-14px)}
    50%{transform:translate(-16px,14px)}
    75%{transform:translate(14px,16px)}
    100%{transform:translate(0)}
  }
  #screamer::before{
    content:"";
    position:absolute;
    inset:-20%;
    background:
      radial-gradient(700px 460px at 30% 35%, rgba(255,42,42,.20), transparent 60%),
      radial-gradient(900px 650px at 70% 55%, rgba(255,255,255,.07), transparent 60%),
      repeating-linear-gradient(
        0deg,
        rgba(255,255,255,.07) 0px,
        rgba(255,255,255,.07) 2px,
        transparent 2px,
        transparent 7px
      );
    opacity:.95;
    animation: scan 0.45s linear infinite;
    mix-blend-mode: screen;
  }
  @keyframes scan{
    from{ transform: translateY(-12%); }
    to{ transform: translateY(12%); }
  }

  .face{
    width:min(600px, 94vw);
    aspect-ratio: 1 / 1;
    border-radius: 26px;
    border: 2px solid rgba(255,42,42,.75);
    box-shadow: 0 0 120px rgba(255,42,42,.55);
    position:relative;
    overflow:hidden;
    background:
      radial-gradient(900px 700px at 50% 50%, #171717, #000 70%);
  }
  .eye{
    position:absolute;
    width: 28%;
    height: 18%;
    top: 24%;
    border-radius: 999px;
    background:
      radial-gradient(circle at 50% 55%, rgba(255,255,255,.98) 0 18%, rgba(255,255,255,0) 60%),
      radial-gradient(circle at 50% 55%, rgba(255,42,42,.95) 0 12%, rgba(255,42,42,0) 60%);
    filter: drop-shadow(0 0 22px rgba(255,42,42,.65));
    animation: eyeJitter .10s infinite;
    opacity:.98;
  }
  .eye.left{ left: 16%; }
  .eye.right{ right: 16%; }
  @keyframes eyeJitter{
    0%{ transform: translate(0,0) scale(1); }
    50%{ transform: translate(3px,-2px) scale(1.03); }
    100%{ transform: translate(0,0) scale(1); }
  }
  .mouth{
    position:absolute;
    left: 20%;
    right: 20%;
    bottom: 16%;
    height: 32%;
    border-radius: 22px 22px 46px 46px;
    background:
      radial-gradient(140px 90px at 50% 25%, rgba(255,255,255,.14), rgba(0,0,0,0) 70%),
      radial-gradient(700px 280px at 50% 70%, rgba(255,42,42,.62), rgba(0,0,0,.0) 70%),
      radial-gradient(900px 700px at 50% 60%, #0a0a0a, #000 70%);
    border: 1px solid rgba(255,42,42,.38);
    box-shadow: inset 0 -20px 55px rgba(0,0,0,.92);
    animation: mouthPulse .14s infinite;
  }
  @keyframes mouthPulse{
    0%{ transform: translateY(0) scaleY(1); }
    50%{ transform: translateY(3px) scaleY(1.06); }
    100%{ transform: translateY(0) scaleY(1); }
  }
  .sTxt{
    position:absolute;
    bottom: 22px;
    left: 0; right: 0;
    text-align:center;
    font-weight: 900;
    letter-spacing:.22em;
    color: rgba(255,42,42,.95);
    text-shadow: 0 0 22px rgba(255,42,42,.55);
    font-size: clamp(14px, 3vw, 28px);
    animation: glitchText .18s infinite;
    user-select:none;
  }
  @keyframes glitchText{
    0%{ transform: translate(0,0); opacity: 1; }
    25%{ transform: translate(3px,-2px); opacity: .82; }
    50%{ transform: translate(-3px,2px); opacity: 1; }
    75%{ transform: translate(2px,3px); opacity: .9; }
    100%{ transform: translate(0,0); opacity: 1; }
  }

  /* ===== END (красиво без тегов) ===== */
  .final{
    color:#e8d6d6;
    font-size:14px;
    line-height:1.7;
    margin-top:8px;
  }
  .panel{
    border: 1px solid rgba(255,255,255,.08);
    background: rgba(0,0,0,.35);
    border-radius: 14px;
    padding: 14px;
    margin-top: 10px;
  }
  .titleSmall{
    color: rgba(255,255,255,.75);
    letter-spacing:.18em;
    text-transform: uppercase;
    font-size: 12px;
    margin: 0 0 8px;
  }
  .kv{
    display:grid;
    grid-template-columns: 1fr 2fr;
    gap: 6px 10px;
    font-size: 14px;
  }
  .kv b{ color:#fff; font-weight:700; }
  .answers{
    display:flex;
    flex-direction:column;
    gap:10px;
  }
  .qa{
    border-left: 3px solid rgba(255,42,42,.55);
    padding-left: 10px;
  }
  .q{
    color: rgba(255,255,255,.82);
    margin:0 0 4px;
  }
  .a{
    color:#ffb6b6;
    margin:0;
    font-weight:700;
  }
  .fadeIn{
    opacity:0;
    transform: translateY(6px);
    animation: fade 0.9s ease forwards;
  }
  @keyframes fade{
    to{ opacity:1; transform: translateY(0); }
  }
  .watch{
    color:#ff2a2a;
    font-weight:900;
    letter-spacing:.12em;
    text-shadow: 0 0 18px rgba(255,42,42,.45);
    animation: blinkRed 0.9s steps(2,end) infinite;
    text-align:center;
    margin: 10px 0 0;
  }
  @keyframes blinkRed{
    0%{ opacity:1; }
    50%{ opacity:.18; }
    100%{ opacity:1; }
  }
</style>
</head>

<body>
<div class="box">
  <!-- REG -->
  <div id="reg">
    <h1>WELCOME</h1>
    <input id="name" placeholder="Your name">
    <input id="age" placeholder="Your age">
    <input id="city" placeholder="Your city">
    <button id="enterBtn">ENTER</button>
    <div class="hint">Enter на клаве тоже работает</div>
  </div>

  <!-- TEST -->
  <div id="test" class="hidden">
    <h1>ANSWER</h1>
    <div class="question" id="question"></div>
    <input id="answer" placeholder="type your answer">
    <button id="nextBtn">NEXT</button>
    <div class="hint">тебе не  спрятаться</div>
  </div>

  <!-- END -->
  <div id="end" class="hidden">
    <h1>FINAL</h1>
    <div class="final" id="result"></div>
    <button id="resetBtn">RESET</button>
    <div class="hint">Сайт отслеживает тебя на самом деле.</div>
  </div>
</div>

<div id="flash"></div>

<!-- SCREAMER -->
<div id="screamer" aria-hidden="true">
  <div class="face">
    <div class="eye left"></div>
    <div class="eye right"></div>
    <div class="mouth"></div>
    <div class="sTxt">DON'T LOOK BACK</div>
  </div>
</div>

<script>
/* =========================
   QUESTIONS
========================= */
const questionsPool = [
  "Are you alone right now?",
  "Did you lock the door?",
  "Is the light on in your room?",
  "Do you hear any small sounds?",
  "When was the last time you checked behind you?",
  "What is your biggest fear?",
  "Do you believe in ghosts?",
  "Have you ever felt watched?",
  "What would you do if someone whispered your name?",
  "Do you trust this website?",
  "Why did you continue?",
  "What time is it where you are?",
  "What was the last thing you ate?",
  "What is the nearest object to your hand?",
  "Do you sleep with the door closed?",
  "Have you ever seen a shadow move?",
  "If you heard steps in the corridor, would you look?",
  "Who knows you are here right now?",
  "What app did you open last?",
  "What is your worst memory?",
  "What would you never want to lose?",
  "What is something you hide from people?",
  "Do you think someone is reading this with you?",
  "Describe the last nightmare you remember.",
  "Do you want to stop now?"
];

const TOTAL_QUESTIONS = 14;

function pickRandomQuestions(all, count){
  const copy = [...all];
  for(let i = copy.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [copy[i], copy[j]] = [copy[j], copy[i]];
  }
  return copy.slice(0, count);
}

/* =========================
   DOM
========================= */
const regEl = document.getElementById("reg");
const testEl = document.getElementById("test");
const endEl  = document.getElementById("end");

const nameInput = document.getElementById("name");
const ageInput  = document.getElementById("age");
const cityInput = document.getElementById("city");

const questionEl = document.getElementById("question");
const answerInput = document.getElementById("answer");
const resultEl = document.getElementById("result");

const enterBtn = document.getElementById("enterBtn");
const nextBtn = document.getElementById("nextBtn");
const resetBtn = document.getElementById("resetBtn");

const screamer = document.getElementById("screamer");
const flash = document.getElementById("flash");

/* =========================
   STATE
========================= */
let user = {};
let answers = [];
let qIndex = 0;
let sessionQuestions = pickRandomQuestions(questionsPool, TOTAL_QUESTIONS);

// скример: 1 раз, без предупреждения, случайно во время вопросов
let screamScheduled = false;
let screamTriggered = false;
let screamTimer = null;

// финальный скример (в конце)
let finalScreamTimer = null;

let lastScreamAt = 0;

/* =========================
   AUDIO (WebAudio) — MUSIC + "GIRL" SCREAM
========================= */
let ctx = null;
let musicOn = false;
let musicNodes = null;

function ensureAudio(){
  if(!ctx){
    ctx = new (window.AudioContext || window.webkitAudioContext)();
  }
  if(ctx.state === "suspended"){
    ctx.resume().catch(()=>{});
  }
}

// мрачная “натягивающая нервы” музыка (генерация, без файлов)
function startTenseMusic(){
  ensureAudio();
  if(musicOn) return;

  const master = ctx.createGain();
  master.gain.value = 0.33;

  const comp = ctx.createDynamicsCompressor();
  comp.threshold.value = -26;
  comp.knee.value = 22;
  comp.ratio.value = 7;
  comp.attack.value = 0.006;
  comp.release.value = 0.12;

  const filter = ctx.createBiquadFilter();
  filter.type = "lowpass";
  filter.frequency.value = 900;
  filter.Q.value = 0.75;

  const lfo = ctx.createOscillator();
  lfo.type = "sine";
  lfo.frequency.value = 0.22;
  const lfoGain = ctx.createGain();
  lfoGain.gain.value = 520;
  lfo.connect(lfoGain);
  lfoGain.connect(filter.frequency);

  const o1 = ctx.createOscillator();
  o1.type = "sawtooth";
  o1.frequency.value = 52;

  const o2 = ctx.createOscillator();
  o2.type = "triangle";
  o2.frequency.value = 68;

  const mix = ctx.createGain();
  mix.gain.value = 0.60;

  o1.connect(mix);
  o2.connect(mix);

  mix.connect(filter);
  filter.connect(comp);
  comp.connect(master);
  master.connect(ctx.destination);

  o1.start();
  o2.start();
  lfo.start();

  const pumpTimer = setInterval(() => {
    if(!musicOn) return;
    const t = Date.now()/1000;
    master.gain.value = 0.28 + 0.12*(0.5 + 0.5*Math.sin(t*2.1));
    filter.frequency.value = 650 + 450*(0.5 + 0.5*Math.sin(t*0.22));
    o2.frequency.value = 64 + 10*(0.5 + 0.5*Math.sin(t*0.14));
    o1.frequency.value = 50 + 6*(0.5 + 0.5*Math.sin(t*0.11));
  }, 50);

  musicNodes = { master, comp, filter, lfo, lfoGain, o1, o2, mix, pumpTimer };
  musicOn = true;
}

// “девичий” крик: визг + шум + искажение (очень резко)
function girlScreamVeryScary(){
  ensureAudio();
  const now = ctx.currentTime;

  if(Date.now() - lastScreamAt < 800) return;
  lastScreamAt = Date.now();

  const master = ctx.createGain();
  master.gain.value = 2.9; // резко (ощущается громко)

  const comp = ctx.createDynamicsCompressor();
  comp.threshold.value = -32;
  comp.knee.value = 24;
  comp.ratio.value = 12;
  comp.attack.value = 0.001;
  comp.release.value = 0.08;

  const shaper = ctx.createWaveShaper();
  shaper.curve = makeDistortionCurve(900);
  shaper.oversample = "4x";

  const bp = ctx.createBiquadFilter();
  bp.type = "bandpass";
  bp.frequency.value = 1150;
  bp.Q.value = 1.3;

  const hp = ctx.createBiquadFilter();
  hp.type = "highpass";
  hp.frequency.value = 420;

  const o = ctx.createOscillator();
  o.type = "sawtooth";
  o.frequency.value = 980;

  const o2 = ctx.createOscillator();
  o2.type = "triangle";
  o2.frequency.value = 740;

  const size = Math.floor(ctx.sampleRate * 0.42);
  const buffer = ctx.createBuffer(1, size, ctx.sampleRate);
  const data = buffer.getChannelData(0);
  for(let i=0;i<size;i++){
    data[i] = (Math.random()*2 - 1) * 0.95;
  }
  const noise = ctx.createBufferSource();
  noise.buffer = buffer;

  const g = ctx.createGain();
  g.gain.value = 0.0001;

  o.connect(bp);
  o2.connect(bp);
  noise.connect(bp);

  bp.connect(hp);
  hp.connect(shaper);
  shaper.connect(g);
  g.connect(comp);
  comp.connect(master);
  master.connect(ctx.destination);

  g.gain.setValueAtTime(0.0001, now);
  g.gain.exponentialRampToValueAtTime(1.0, now + 0.02);
  g.gain.exponentialRampToValueAtTime(0.0001, now + 0.38);

  o.frequency.setValueAtTime(820, now);
  o.frequency.exponentialRampToValueAtTime(1650, now + 0.08);
  o.frequency.exponentialRampToValueAtTime(920, now + 0.38);

  o2.frequency.setValueAtTime(620, now);
  o2.frequency.exponentialRampToValueAtTime(980, now + 0.07);
  o2.frequency.exponentialRampToValueAtTime(680, now + 0.38);

  bp.frequency.setValueAtTime(900, now);
  bp.frequency.exponentialRampToValueAtTime(1550, now + 0.10);
  bp.frequency.exponentialRampToValueAtTime(1120, now + 0.38);

  o.start(now);
  o2.start(now);
  noise.start(now);

  o.stop(now + 0.45);
  o2.stop(now + 0.45);
  noise.stop(now + 0.45);

  setTimeout(() => {
    try{ o.disconnect(); }catch(e){}
    try{ o2.disconnect(); }catch(e){}
    try{ noise.disconnect(); }catch(e){}
    try{ bp.disconnect(); }catch(e){}
    try{ hp.disconnect(); }catch(e){}
    try{ shaper.disconnect(); }catch(e){}
    try{ g.disconnect(); }catch(e){}
    try{ comp.disconnect(); }catch(e){}
    try{ master.disconnect(); }catch(e){}
  }, 900);
}

function makeDistortionCurve(amount){
  const n = 44100;
  const curve = new Float32Array(n);
  const deg = Math.PI / 180;
  for (let i = 0; i < n; ++i) {
    const x = (i * 2) / n - 1;
    curve[i] = ((3 + amount) * x * 20 * deg) / (Math.PI + amount * Math.abs(x));
  }
  return curve;
}

/* =========================
   FLOW
========================= */
function setQuestion(){
  questionEl.textContent = sessionQuestions[qIndex];
  answerInput.value = "";
  answerInput.focus();

  // МИГАНИЕ НА КАЖДОМ ВОПРОСЕ
  questionEl.classList.remove("flickerQ");
  void questionEl.offsetWidth;
  questionEl.classList.add("flickerQ");
  setTimeout(() => questionEl.classList.remove("flickerQ"), 1500);
}

function scheduleRandomScreamer(){
  if(screamScheduled) return;
  screamScheduled = true;

  // 1 раз в случайный момент (6..20 секунд) во время вопросов
  const delay = Math.floor(Math.random() * 14000) + 6000;
  screamTimer = setTimeout(() => {
    if(screamTriggered) return;
    if(!testEl.classList.contains("hidden")) triggerScreamer();
  }, delay);
}

function afterScreamerMessage(questionIndexSnapshot){
  // после скримера: на 1 секунду "I SEE YOU"
  if(testEl.classList.contains("hidden")) return; // не на экране вопросов
  if(qIndex !== questionIndexSnapshot) return;     // пользователь уже ушёл дальше

  const original = sessionQuestions[qIndex];
  questionEl.textContent = "I SEE YOU";
  questionEl.classList.remove("flickerQ");
  void questionEl.offsetWidth;
  questionEl.classList.add("flickerQ");

  setTimeout(() => {
    // вернуть вопрос
    if(testEl.classList.contains("hidden")) return;
    if(qIndex !== questionIndexSnapshot) return;
    questionEl.textContent = original;
  }, 1000);
}

function triggerScreamer(){
  screamTriggered = true;

  const snapshot = qIndex;

  flash.classList.add("on");
  screamer.classList.add("show");
  screamer.setAttribute("aria-hidden", "false");

  // страшный крик
  girlScreamVeryScary();

  // музыка НЕ останавливается (как ты просила)
  setTimeout(() => flash.classList.remove("on"), 1200);

  // "I SEE YOU" после скримера на 1 секунду
  setTimeout(() => afterScreamerMessage(snapshot), 900);
}

function startTest(){
  user.name = nameInput.value.trim();
  user.age  = ageInput.value.trim();
  user.city = cityInput.value.trim();

  if(!user.name || !user.age || !user.city){
    alert("Fill everything.");
    return;
  }

  sessionQuestions = pickRandomQuestions(questionsPool, TOTAL_QUESTIONS);
  answers = [];
  qIndex = 0;
  screamScheduled = false;
  screamTriggered = false;

  regEl.classList.add("hidden");
  testEl.classList.remove("hidden");

  // музыка начинается после клика (браузер разрешает)
  startTenseMusic();
  scheduleRandomScreamer();

  setQuestion();
}

function nextQuestion(){
  const a = answerInput.value.trim();
  if(!a){
    alert("Answer.");
    return;
  }

  answers.push({ q: sessionQuestions[qIndex], a });
  qIndex++;

  if(qIndex < sessionQuestions.length){
    setQuestion();
  } else {
    finish();
  }
}

function finish(){
  testEl.classList.add("hidden");
  endEl.classList.remove("hidden");

  // красивая история без "лишних знаков"
  const time = new Date().toLocaleTimeString();
  const safeName = escapeHtml(user.name);
  const safeAge  = escapeHtml(user.age);
  const safeCity = escapeHtml(user.city);

  // собираем ответы как аккуратные блоки
  const qaHtml = answers.map((x, idx) => `
    <div class="qa fadeIn" style="animation-delay:${(idx*0.06 + 0.9).toFixed(2)}s">
      <p class="q"><b>${idx+1}.</b> ${escapeHtml(x.q)}</p>
      <p class="a">— ${escapeHtml(x.a)}</p>
    </div>
  `).join("");

  resultEl.innerHTML = `
    <div class="panel fadeIn" style="animation-delay:.10s">
      <div class="titleSmall">FINAL RECORD — ${escapeHtml(time)}</div>
      <div>
        Ты думал(а), что это просто сайт.<br>
        Но сайт — это дверь.<br>
        А ты сам(а) нажал(а) на ручку.
      </div>
    </div>

    <div class="panel fadeIn" style="animation-delay:.35s">
      <div class="titleSmall">Сначала ты оставил(а) простое</div>
      <div class="kv">
        <div>Имя:</div><div><b>${safeName}</b></div>
        <div>Возраст:</div><div><b>${safeAge}</b></div>
        <div>Город:</div><div><b>${safeCity}</b></div>
      </div>
    </div>

    <div class="panel fadeIn" style="animation-delay:.60s">
      <div class="titleSmall">Потом ты начал(а) отвечать</div>
      <div>
        И каждый ответ — как шаг по коридору, где не горит свет.<br>
        Ты слышишь только своё дыхание… и <b>чьё-то ещё</b>.
      </div>
    </div>

    <div class="panel">
      <div class="titleSmall fadeIn" style="animation-delay:.85s">ТВОИ ОТВЕТЫ</div>
      <div class="answers">${qaHtml}</div>
    </div>

    <div class="panel fadeIn" style="animation-delay:${(answers.length*0.06 + 1.25).toFixed(2)}s">
      <div class="titleSmall">И вот что страшно</div>
      <div>
        Ты думаешь, что ответы исчезают.<br>
        Но они <b>остаются</b>.<br><br>
        Если в комнате что-то щёлкнет — не проверяй.<br>
        Если экран моргнёт — не смотри в отражение.
      </div>
      <div class="watch">WE ARE WATCHING YOU</div>
    </div>
  `;

  // финальный скример (ещё один) — через 7–10 сек после появления финала
  const finalDelay = Math.floor(Math.random() * 3000) + 7000;
  clearTimeout(finalScreamTimer);
  finalScreamTimer = setTimeout(() => {
    // показываем финальный скример даже на финале
    flash.classList.add("on");
    screamer.classList.add("show");
    screamer.setAttribute("aria-hidden", "false");
    girlScreamVeryScary();
    setTimeout(() => flash.classList.remove("on"), 1200);
  }, finalDelay);
}

function hideScreamerOnly(){
  // прячем скример, но музыка продолжает
  flash.classList.remove("on");
  screamer.classList.remove("show");
  screamer.setAttribute("aria-hidden", "true");
}

function fakeReset(){
  alert("TOO LATE");
}

function escapeHtml(str){
  return String(str)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

/* =========================
   EVENTS
========================= */
enterBtn.addEventListener("click", startTest);
nextBtn.addEventListener("click", nextQuestion);
resetBtn.addEventListener("click", fakeReset);

document.addEventListener("keydown", (e) => {
  if(e.key === "Enter"){
    if(!regEl.classList.contains("hidden")) startTest();
    else if(!testEl.classList.contains("hidden")) nextQuestion();
  }
  if(e.key === "Escape"){
    hideScreamerOnly(); // музыка НЕ выключается
  }
});

screamer.addEventListener("click", hideScreamerOnly);
</script>
</body>
</html>


